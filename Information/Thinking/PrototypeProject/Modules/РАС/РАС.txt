Мгновенные РАСВТЗ (СигналДискр ВТЗ, строка ТЗСост, строка ТЗКод, строка ТЗИмя)
 [Name='Задача РАС для одной ВТЗ']
  = СдвигПоВремени(Событие(1;ВТЗ);0,0001)
  Мгновенные КодВТЗ = ВТЗ.Code
  Мгновенные ПриорВТЗ = ВзятьТабл(VTZTZ;КодВТЗ;0)
  Мгновенные ПриорВТЗточка = ЗначениеПоТочкам(ПриорВТЗ;ПервСост)
  Мгновенные ПервКод = ЗначениеПоНомеру(1;ТЗКод;СегментыОтТочек(Владелец;-1))
  Мгновенные ПервИмя = ЗначениеПоНомеру(1;ТЗИмя;СегментыОтТочек(Владелец;-1))
  Мгновенные ПервВрем = ВремяТочки(ПервКод)
  Мгновенные ПервВремСтр = ВремяМс(ПервВрем)
  Мгновенные ПервСост = ЗначениеПоНомеру(1;ТЗСост;СегментыОтТочек(Владелец;-1))
  Мгновенные ПервСостСтр = SostStr(ПервСост;'ТЗ_1')
  Мгновенные ПризнВремАвар = -1*(АВАРИЯ.ВремяАварии == ПервВрем);
  
Генерация РАС : VTZTZ(UnitTypeVTZ=='ВТЗ')
  [ToIdent(Code)+ '_РАС'] [Name=NameVTZ] 
  ТЗИмя = Объединить([GenSubTabl(UnitTypeTZ=='ТЗ', 'Событие(\'' + NameTZ + '\', Бит(' + Объект(Code) + ', 14)), ', '') 
                      GenSubTabl(UnitTypeTZ=='ВТЗ', 'Событие(\'' + NameTZ + '\',' + Объект(Code) + ')', '')] 
			   	      БезТочек)
  ТЗКод = Объединить([GenSubTabl(UnitTypeTZ=='ТЗ', 'Событие(\'' + Code + '\', Бит(' + Объект(Code) + ', 14)), ', '') 
                      GenSubTabl(UnitTypeTZ=='ВТЗ', 'Событие(\'' + Code + '\',' + Объект(Code) + ')', '')] 
			   	      БезТочек)
  ТЗСост = Объединить([GenSubTabl(UnitTypeTZ=='ТЗ', 'Событие(' + Объект(Code), Бит(' + Объект(Code) + ', 14)), ', '') 
                      GenSubTabl(UnitTypeTZ=='ВТЗ', 'Событие(' + Объект(Code), Объект(Code) + ')', '')] 
			   	      БезТочек)  
  = РАСВТЗ([Объект(Code)], ТЗСост, ТЗКод, ТЗИмя);